!function(e){"use strict";function i(i){var t,a,n,l,s,o,r,c,d,p,g,u,f,h,v,y,m,w,C,k=this,b=e([]),x=e([]),T=e([]),S=e([]),A=[],I=[],N=[],D=[],P=0,z=300,F=300,K=!1,L={spacing:0,wave:!0,waveTimeout:300,modifier:"",slideShowSpeed:1e4,cellFadeInSpeed:200,noCategoryName:"all",disableSliderOnClick:!1,load:function(e){e()},onCellClick:function(){}},M={windowResize:function(){Y()},bodyClick:function(i){0===e(i.target).closest(".galereya-cats").length&&x.removeClass("open")},categoriesListClick:function(i){var t=e(i.target),a=i.target.nodeName;"SPAN"===a&&(t=t.parent()),t.is(":first-child")||X(t.find("span").text()),x.toggleClass("open")},cellClick:function(e){k.options.disableSliderOnClick||Z(parseInt(this.getAttribute("data-visibleIndex"),10)),k.options.onCellClick(e)},sliderNextClick:function(){ii("next")},sliderPrevClick:function(){ii("prev")},sliderCloseClick:function(){$()},sliderPlayClick:function(){C?li():ni()},bodyKeyDown:function(e){K&&(37===e.which||39===e.which)&&e.preventDefault()},bodyKeyUp:function(e){if(K)switch(e.which){case 27:$();break;case 37:r.click();break;case 39:o.click()}}},O=function(){k.addClass("galereya").addClass(k.options.modifier),Q(function(){W(),Y(),_(),k.options.wave&&E()&&V(),si()})},E=function(){var e=document.createElement("div").style,i="transition"in e||"WebkitTransition"in e||"MozTransition"in e||"msTransition"in e||"OTransition"in e;return i},H=function(e){var i=e.css("transitionDuration")||e.css("webkitTransitionDuration")||e.css("mozTransitionDuration")||e.css("oTransitionDuration")||e.css("msTransitionDuration")||0;return i=1e3*parseFloat(i)},R=function(){z=b.width(),F=b.height(),P=Math.floor((k.width()-10)/(z+k.options.spacing)),1>P&&(P=1),f=P*z+(P-1)*k.options.spacing,h=Math.ceil(n.length/P)*F},U=function(i){var t=e(document.createElement("img")).attr("src",i);return k.append(t),n=n.add(t),t},j=function(i,t){var n="",l=t.append.split(",");e.each(l,function(e){n+=l[e]?'<img src="'+l[e]+'">':""});var s=i.addClass("galereya-cell-img").wrap('<div class="galereya-cell" data-index="'+b.length+'"></div>').parent().append('<div class="galereya-cell-desc">'+n+'<div class="galereya-cell-desc-text">'+t.description+'</div>                                <div class="galereya-cell-desc-title">'+t.title+"</div>                            </div>").append('<div class="galereya-cell-overlay" />');return s.click(M.cellClick),b=b.add(s),a.append(s),s},B=function(i){var t={lowsrc:i.lowsrc||"",fullsrc:i.fullsrc||"",title:i.title||"",description:i.description||"",category:i.category||"",append:i.append||"",hlink:i.hlink||"#",hindex:i.hindex||"-1"};return t.category&&(t.category=t.category.toLowerCase(),-1===e.inArray(t.category,I)&&I.push(t.category)),A.push(t),t},Q=function(e){var i;n=k.find("img").each(function(e,t){i={lowsrc:t.getAttribute("src")||"",fullsrc:t.getAttribute("data-fullsrc")||"",title:t.getAttribute("title")||t.getAttribute("alt")||"",description:t.getAttribute("data-desc")||"",category:t.getAttribute("data-category")||"",hlink:t.getAttribute("data-hlink")||"#",hindex:t.getAttribute("data-index")||"0",append:t.getAttribute("data-append")||""},B(i)}),k.options.load(function(i){if(i&&i.length)for(var t,a=0,n=i.length;n>a;a++)t=B(i[a]),U(t.lowsrc);e()})},W=function(){if(I.length>0){x=e('<ul class="galereya-cats" />'),t=e('<div class="galereya-top" />'),k.prepend(t.html(x)),x.append('<li class="galereya-cats-item"><span>'+k.options.noCategoryName+"</span></li>");for(var i=0;i<I.length;i++)x.append('<li class="galereya-cats-item"><span>'+I[i]+"</span></li>")}var g,u,f,h,v,y="",m=0,w="",C="",T="";n.wrapAll('<div class="galereya-grid" />').each(function(i,t){g=e(t),u=A[i].title,f=A[i].description,h=A[i].hlink,m=A[i].hindex,v=A[i].append.split(","),e.each(v,function(e){w+=v[e]?'<img class="img-responsive" src="'+v[e]+'">':""}),C=0>m?'<a href="'+h+'" target="_blank">':'<a href="#" onclick=switchTab("mywork",'+m+")>",T="</a>",y=u||f?"":' style="display: none"',g.addClass("galereya-cell-img").wrap(C+'<div class="galereya-cell" data-index="'+i+'"></div>'+T).parent().append(w+'<div class="galereya-cell-desc"'+y+'>                                <div class="galereya-cell-desc-text">'+f+'</div>                                <div class="galereya-cell-desc-title">'+u+"</div>                            </div>").append('<div class="galereya-cell-overlay" />'),w=""}),b=k.find(".galereya-cell"),a=k.find(".galereya-grid"),l=e('<div class="galereya-slider" />'),s=e('<div class="galereya-slider-container" />'),o=e('<div class="galereya-slider-nav right" />'),r=e('<div class="galereya-slider-nav left" />'),c=e('<div class="galereya-slider-desc" />'),d=e('<div class="galereya-slider-close" />'),p=e('<div class="galereya-slider-play" />'),l.addClass(k.options.modifier).append(s).append(o).append(r).append(c).append(c).append(d).append(p),k.show()},_=function(i,t){if(i=i||0,!(i>=n.length)){if(clearTimeout(y),t&&A[i].category!==t)return void setTimeout(function(){_(++i,t)},0);var a=n[i],l=function(){K?e(this).parent().show():e(this).parent().fadeIn(k.options.cellFadeInSpeed,"linear"),y=setTimeout(function(){_(++i,t)},k.options.cellFadeInSpeed/2)};a.complete?l.call(a):e(a).load(l).attr("src",a.src),q(i)}},q=function(i){var t,a=b[i];G(a,N.length),t=N.push(a)-1,e(a).addClass("visible").attr("data-visibleIndex",t)},G=function(e,i){var t,n,l,s;s=i%P,t=s*z+k.options.spacing*s,i>=P?(l=N[i-P],n=l.offsetTop+l.offsetHeight+k.options.spacing):n=0;var o=n+e.offsetHeight;o>h&&(h=o,a.height(h+a[0].offsetTop)),e.style.top=n+"px",e.style.left=t+"px"},J=function(){N=[],h=0,b.stop(!0,!0).fadeOut(200).removeClass("visible")},V=function(i){i=i||0,i>=b.length&&(i=0);var t=e(b[i]);t.addClass("wave"),setTimeout(function(){t.removeClass("wave"),V(++i)},k.options.waveTimeout)},X=function(e){w=e,x.empty().prepend('<li class="galereya-cats-item"><span>'+e+"</span></li>"),J(),e===k.options.noCategoryName?_(0):(x.append('<li class="galereya-cats-item"><span>'+k.options.noCategoryName+"</span></li>"),_(0,e));for(var i,t=0,a=I.length;a>t;t++)i=I[t],i!==e&&x.append('<li class="galereya-cats-item"><span>'+i+"</span></li>")},Y=function(){R(),0===S.length&&(S=T.find(".galereya-slide-img")),S.css("margin-top",(e(window).height()-S.height())/2),a.width(f),h=0;for(var i=0,t=N.length;t>i;i++)G(N[i],i)},Z=function(i){if(K)return void setTimeout(function(){Z(i)},50);li(),s.empty(),m=i;var t=H(l),a=function(){g=e("html").css("overflow"),u=e("body").css("overflow"),v=e(window).scrollTop(),e("html, body").css("overflow","hidden")};l.show(0,function(){l.addClass("opened"),E()?setTimeout(a,t+50):a()}),K=!0,ii(),ai()},$=function(){if(K){e("html").css("overflow",g),e("body").css("overflow",u),e(window).scrollTop(v);var i=H(l),t=function(){li(),D=[],s.empty(),l.hide(),K=!1};l.removeClass("opened"),E()?setTimeout(t,i+50):t()}},ei=function(i){clearInterval(C);var t,a,n=N[i],l=parseInt(n.getAttribute("data-index"),10);return t=e('<div class="galereya-slider-slide" />').html('<div class="galereya-slide-loader"></div>'),a=e('<img class="galereya-slide-img" src="'+A[l].fullsrc+'" alt="'+A[l].title+'" />').load(function(){t.html(a),a.css("margin-top",(e(window).height()-a.height())/2),C&&ni()}),t.on("swiperight",M.sliderPrevClick),t.on("swipeleft",M.sliderNextClick),t},ii=function(i){i=i||"next",C&&(li(),ni());var t,a,n,l=i.toLowerCase(),o=N.length;if("next"===l){if(0===D.length)t=m,l="";else if(t=m+1,t>=o)return;a=D[t],a||(a=ei(t),a.addClass(l),s.append(a),D[t]=a),ti(a,"current"),ti(T,"prev")}else if("prev"===l){if(0!==D.length&&(l=""),t=m-1,0>t)return;a=D[t],a||(a=ei(t),a.addClass(l),s.prepend(a),D[t]=a),ti(a,"current"),ti(T,"next")}m=t,T=a,n=N[m].getAttribute("data-index"),c.empty().html('<div class="galereya-slider-desc-title">'+A[n].title+" </div>"+A[n].description),c.toggle(Boolean(A[n].title||A[n].description)),S=a.find(".galereya-slide-img"),S.css("margin-top",(e(window).height()-S.height())/2),ai()},ti=function(e,i){setTimeout(function(){e.removeClass("prev").removeClass("next").removeClass("current").addClass(i)},50)},ai=function(){var e=N.length;m>=e-1?(li(),p.hide(),o.hide()):(p.show(),o.show()),0>=m?r.hide():r.show()},ni=function(){p.addClass("pause"),C=setInterval(function(){o.click()},k.options.slideShowSpeed)},li=function(){p.removeClass("pause"),clearInterval(C),C=null},si=function(){e(window).bind("resize",M.windowResize),e(document.body).click(M.bodyClick).keydown(M.bodyKeyDown).keyup(M.bodyKeyUp),x.click(M.categoriesListClick),b.click(M.cellClick),o.click(M.sliderNextClick),r.click(M.sliderPrevClick),d.click(M.sliderCloseClick),p.click(M.sliderPlayClick)};return this.options=e.extend({},L,i),this.openSlider=Z,this.closeSlider=$,this.changeCategory=X,this.startSlideShow=ni,this.stopSlideShow=li,this.nextSlide=function(){o.click()},this.prevSlide=function(){r.click()},this.loadMore=function(e){if(e&&e.length){for(var i,t,a=0,n=b.length,l=n,s=e.length;s>a;a++,l++)i=B(e[a]),t=U(i.lowsrc),j(t,i);_(n,w)}},O(),this.length>1&&this.each(function(){e(this).galereya(i)}),this}e.fn.galereya=i}(jQuery);
